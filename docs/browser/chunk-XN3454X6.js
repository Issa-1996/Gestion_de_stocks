import{A as s,M as l,k as o,ka as n,l as i}from"./chunk-6W2COFZ2.js";var c=class a{currentUserSignal=n(null);isAuthenticatedSignal=n(!1);mockUsers=[{id:"1",email:"admin@gestion.com",firstName:"Admin",lastName:"Syst\xE8me",role:"ADMIN",avatar:"https://ui-avatars.com/api/?name=Admin+Syst\xE8me",createdAt:new Date,updatedAt:new Date},{id:"2",email:"manager@gestion.com",firstName:"Manager",lastName:"Principal",role:"MANAGER",avatar:"https://ui-avatars.com/api/?name=Manager+Principal",createdAt:new Date,updatedAt:new Date}];constructor(){this.loadUserFromStorage()}get currentUser(){return this.currentUserSignal.asReadonly()}get isAuthenticated(){return this.isAuthenticatedSignal.asReadonly()}login(t){let e=this.mockUsers.find(r=>r.email===t.email);if(e&&t.password==="password"){let r={user:e,token:"mock-jwt-token-"+Date.now(),refreshToken:"mock-refresh-token-"+Date.now()};return this.currentUserSignal.set(e),this.isAuthenticatedSignal.set(!0),this.saveUserToStorage(e,r.token),o(r).pipe(s(500))}return i(()=>new Error("Email ou mot de passe incorrect")).pipe(s(500))}logout(){this.currentUserSignal.set(null),this.isAuthenticatedSignal.set(!1),localStorage.removeItem("currentUser"),localStorage.removeItem("authToken")}saveUserToStorage(t,e){localStorage.setItem("currentUser",JSON.stringify(t)),localStorage.setItem("authToken",e)}loadUserFromStorage(){let t=localStorage.getItem("currentUser"),e=localStorage.getItem("authToken");if(t&&e){let r=JSON.parse(t);this.currentUserSignal.set(r),this.isAuthenticatedSignal.set(!0)}}static \u0275fac=function(e){return new(e||a)};static \u0275prov=l({token:a,factory:a.\u0275fac,providedIn:"root"})};export{c as a};
