import{a as U}from"./chunk-XN3454X6.js";import{a as Z}from"./chunk-B5S7WDEH.js";import{a as Q,b as L,c as j,d as B,e as D,f as z,g as G,h as H,i as R,j as K,m as Y,n as J}from"./chunk-SGLWUWSN.js";import{a as X}from"./chunk-3SUUGB3S.js";import{$ as I,$a as g,Ba as S,Ga as T,Ib as F,Jb as N,Ka as v,Ra as f,Sa as q,Ua as O,Va as M,Wa as y,Xa as i,Y as P,Ya as o,Z as C,Za as h,_ as x,_a as E,ab as _,gb as d,hb as w,ib as b,ka as m,kb as s,lb as u,mb as p,ob as V,pb as A,va as W,xa as a}from"./chunk-6W2COFZ2.js";var k=(c,n)=>n.id;function ee(c,n){if(c&1){let r=E();i(0,"button",24),g("click",function(){P(r);let l=_();return C(l.openAddModal())}),d(1,"+ Nouveau Produit"),o()}}function te(c,n){if(c&1){let r=E();i(0,"div",31)(1,"button",32),g("click",function(){P(r);let l=_().$implicit,t=_();return C(t.openEditModal(l))}),x(),i(2,"svg",33),h(3,"path",34)(4,"path",35),o()(),I(),i(5,"button",36),g("click",function(){P(r);let l=_().$implicit,t=_();return C(t.deleteProduct(l.id))}),x(),i(6,"svg",33),h(7,"polyline",37)(8,"path",38)(9,"line",39)(10,"line",40),o()()()}}function ne(c,n){if(c&1&&(i(0,"div",4),h(1,"img",25),i(2,"div",26)(3,"h3"),d(4),o(),i(5,"p",27),d(6),o(),i(7,"div",28)(8,"span",29),d(9),V(10,"number"),o(),i(11,"span",30),d(12),o()(),v(13,te,11,0,"div",31),o()()),c&2){let r=n.$implicit,e=_();a(),f("src",r.imageUrl,W)("alt",r.name),a(3),w(r.name),a(2),b("SKU: ",r.sku,""),a(3),b("",A(10,11,r.unitPrice,"1.2-2")," FCFA"),a(2),q("low",r.quantity<=r.minQuantity)("out",r.quantity===0),a(),b(" Stock: ",r.quantity," "),a(),O(e.isAdmin()?13:-1)}}function ie(c,n){if(c&1&&(i(0,"option",14),d(1),o()),c&2){let r=n.$implicit;f("value",r.id),a(),w(r.name)}}function oe(c,n){if(c&1&&(i(0,"option",14),d(1),o()),c&2){let r=n.$implicit;f("value",r.id),a(),w(r.name)}}var $=class c{constructor(n,r){this.productService=n;this.authService=r}products=m([]);categories=m([]);suppliers=m([]);showModal=m(!1);editMode=m(!1);editingProductId=m(null);newProduct={name:"",description:"",sku:"",categoryId:"",supplierId:"",unitPrice:0,costPrice:0,quantity:0,minQuantity:5,maxQuantity:100,unit:"pi\xE8ce",imageUrl:"",status:"ACTIVE"};ngOnInit(){this.loadData()}loadData(){this.productService.getProducts().subscribe(n=>{this.products.set(n)}),this.productService.getCategories().subscribe(n=>{this.categories.set(n)}),this.productService.getSuppliers().subscribe(n=>{this.suppliers.set(n)})}isAdmin(){return this.authService.currentUser()?.role==="ADMIN"}openAddModal(){this.editMode.set(!1),this.editingProductId.set(null),this.resetForm(),this.showModal.set(!0)}openEditModal(n){this.editMode.set(!0),this.editingProductId.set(n.id),this.newProduct={name:n.name,description:n.description,sku:n.sku,categoryId:n.categoryId,supplierId:n.supplierId,unitPrice:n.unitPrice,costPrice:n.costPrice,quantity:n.quantity,minQuantity:n.minQuantity,maxQuantity:n.maxQuantity,unit:n.unit,imageUrl:n.imageUrl,status:n.status},this.showModal.set(!0)}closeModal(){this.showModal.set(!1),this.editMode.set(!1),this.editingProductId.set(null),this.resetForm()}resetForm(){this.newProduct={name:"",description:"",sku:"",categoryId:"",supplierId:"",unitPrice:0,costPrice:0,quantity:0,minQuantity:5,maxQuantity:100,unit:"pi\xE8ce",imageUrl:"",status:"ACTIVE"}}deleteProduct(n){confirm("\xCAtes-vous s\xFBr de vouloir supprimer ce produit ?")&&this.productService.deleteProduct(n).subscribe({next:()=>{this.loadData(),alert("Produit supprim\xE9 avec succ\xE8s !")},error:r=>{console.error("Erreur lors de la suppression:",r),alert("Erreur lors de la suppression du produit")}})}onSubmit(){if(this.editMode()){let n=this.editingProductId();n&&this.productService.updateProduct(n,this.newProduct).subscribe({next:()=>{this.loadData(),this.closeModal(),alert("Produit modifi\xE9 avec succ\xE8s !")},error:r=>{console.error("Erreur lors de la modification:",r),alert("Erreur lors de la modification du produit")}})}else this.productService.addProduct(this.newProduct).subscribe({next:n=>{this.loadData(),this.closeModal(),alert("Produit ajout\xE9 avec succ\xE8s !")},error:n=>{console.error("Erreur lors de l'ajout du produit:",n),alert("Erreur lors de l'ajout du produit")}})}static \u0275fac=function(r){return new(r||c)(S(X),S(U))};static \u0275cmp=T({type:c,selectors:[["app-products"]],decls:67,vars:13,consts:[[1,"page-container"],[1,"page-header"],[1,"btn-primary"],[1,"products-grid"],[1,"product-card"],[3,"close","isOpen","title"],[1,"product-form",3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","text","name","sku","required","",3,"ngModelChange","ngModel"],["name","description","rows","3",3,"ngModelChange","ngModel"],["name","categoryId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["name","supplierId","required","",3,"ngModelChange","ngModel"],["type","number","name","costPrice","step","0.01","required","",3,"ngModelChange","ngModel"],["type","number","name","unitPrice","step","0.01","required","",3,"ngModelChange","ngModel"],["type","number","name","quantity","required","",3,"ngModelChange","ngModel"],["type","number","name","minQuantity","required","",3,"ngModelChange","ngModel"],["type","url","name","imageUrl","placeholder","https://...",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary"],[1,"btn-primary",3,"click"],[1,"product-image",3,"src","alt"],[1,"product-info"],[1,"product-sku"],[1,"product-details"],[1,"price"],[1,"stock"],[1,"product-actions"],["title","Modifier",1,"btn-icon","btn-edit",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["title","Supprimer",1,"btn-icon","btn-delete",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),d(3,"Gestion des Produits"),o(),v(4,ee,2,0,"button",2),o(),i(5,"div",3),M(6,ne,14,14,"div",4,k),o(),i(8,"app-modal",5),g("close",function(){return e.closeModal()}),i(9,"form",6),g("ngSubmit",function(){return e.onSubmit()}),i(10,"div",7)(11,"div",8)(12,"label"),d(13,"Nom du produit *"),o(),i(14,"input",9),p("ngModelChange",function(t){return u(e.newProduct.name,t)||(e.newProduct.name=t),t}),o()(),i(15,"div",8)(16,"label"),d(17,"SKU *"),o(),i(18,"input",10),p("ngModelChange",function(t){return u(e.newProduct.sku,t)||(e.newProduct.sku=t),t}),o()()(),i(19,"div",8)(20,"label"),d(21,"Description"),o(),i(22,"textarea",11),p("ngModelChange",function(t){return u(e.newProduct.description,t)||(e.newProduct.description=t),t}),o()(),i(23,"div",7)(24,"div",8)(25,"label"),d(26,"Cat\xE9gorie *"),o(),i(27,"select",12),p("ngModelChange",function(t){return u(e.newProduct.categoryId,t)||(e.newProduct.categoryId=t),t}),i(28,"option",13),d(29,"S\xE9lectionner..."),o(),M(30,ie,2,2,"option",14,k),o()(),i(32,"div",8)(33,"label"),d(34,"Fournisseur *"),o(),i(35,"select",15),p("ngModelChange",function(t){return u(e.newProduct.supplierId,t)||(e.newProduct.supplierId=t),t}),i(36,"option",13),d(37,"S\xE9lectionner..."),o(),M(38,oe,2,2,"option",14,k),o()()(),i(40,"div",7)(41,"div",8)(42,"label"),d(43,"Prix d'achat *"),o(),i(44,"input",16),p("ngModelChange",function(t){return u(e.newProduct.costPrice,t)||(e.newProduct.costPrice=t),t}),o()(),i(45,"div",8)(46,"label"),d(47,"Prix de vente *"),o(),i(48,"input",17),p("ngModelChange",function(t){return u(e.newProduct.unitPrice,t)||(e.newProduct.unitPrice=t),t}),o()()(),i(49,"div",7)(50,"div",8)(51,"label"),d(52,"Quantit\xE9 initiale *"),o(),i(53,"input",18),p("ngModelChange",function(t){return u(e.newProduct.quantity,t)||(e.newProduct.quantity=t),t}),o()(),i(54,"div",8)(55,"label"),d(56,"Stock minimum *"),o(),i(57,"input",19),p("ngModelChange",function(t){return u(e.newProduct.minQuantity,t)||(e.newProduct.minQuantity=t),t}),o()()(),i(58,"div",8)(59,"label"),d(60,"URL de l'image"),o(),i(61,"input",20),p("ngModelChange",function(t){return u(e.newProduct.imageUrl,t)||(e.newProduct.imageUrl=t),t}),o()(),i(62,"div",21)(63,"button",22),g("click",function(){return e.closeModal()}),d(64,"Annuler"),o(),i(65,"button",23),d(66,"Ajouter le produit"),o()()()()()),r&2&&(a(4),O(e.isAdmin()?4:-1),a(2),y(e.products()),a(2),f("isOpen",e.showModal())("title",e.editMode()?"Modifier le Produit":"Nouveau Produit"),a(6),s("ngModel",e.newProduct.name),a(4),s("ngModel",e.newProduct.sku),a(4),s("ngModel",e.newProduct.description),a(5),s("ngModel",e.newProduct.categoryId),a(3),y(e.categories()),a(5),s("ngModel",e.newProduct.supplierId),a(3),y(e.suppliers()),a(6),s("ngModel",e.newProduct.costPrice),a(4),s("ngModel",e.newProduct.unitPrice),a(5),s("ngModel",e.newProduct.quantity),a(4),s("ngModel",e.newProduct.minQuantity),a(4),s("ngModel",e.newProduct.imageUrl))},dependencies:[N,F,J,z,R,K,Q,G,H,L,j,Y,D,B,Z],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#1a202c;margin:0}.btn-primary[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#667eea;border:2px solid #667eea;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f7fafc}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:24px}.product-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px #0000001a;transition:transform .2s}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.product-image[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover}.product-info[_ngcontent-%COMP%]{padding:16px}.product-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a202c;margin:0 0 8px}.product-sku[_ngcontent-%COMP%]{font-size:13px;color:#718096;margin:0 0 12px}.product-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#667eea}.stock[_ngcontent-%COMP%]{padding:4px 12px;background:#e6f7f0;color:#10b981;border-radius:12px;font-size:13px;font-weight:600}.stock.low[_ngcontent-%COMP%]{background:#fff4e6;color:#f59e0b}.stock.out[_ngcontent-%COMP%]{background:#ffe6e6;color:#ef4444}.product-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;justify-content:center}.btn-icon[_ngcontent-%COMP%]{padding:8px;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.btn-edit[_ngcontent-%COMP%]{background:#e6f0ff;color:#667eea}.btn-edit[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.btn-delete[_ngcontent-%COMP%]{background:#ffe6e6;color:#ef4444}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.product-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:8px}"]})};export{$ as ProductsComponent};
