import{a as z}from"./chunk-47FWQDXO.js";import{a as w}from"./chunk-3SUUGB3S.js";import{a as I}from"./chunk-HN5HLCYJ.js";import{$ as p,Ba as P,Ga as y,Hb as E,Ib as T,Jb as k,Ka as b,Ta as h,Ua as u,Va as v,Wa as S,Xa as t,Ya as e,Za as l,_ as g,a as x,ab as O,b as M,gb as o,hb as c,ib as f,ka as m,ob as C,pb as _,xa as r}from"./chunk-6W2COFZ2.js";var R=(i,a)=>a.id;function A(i,a){i&1&&(t(0,"div",2),l(1,"div",3),t(2,"p"),o(3,"Chargement des donn\xE9es..."),e()())}function H(i,a){if(i&1&&(t(0,"div",27)(1,"div",28),g(),t(2,"svg",29),l(3,"path",12)(4,"line",13)(5,"line",14),e()(),p(),t(6,"div",30)(7,"p"),o(8),e(),t(9,"span",31),o(10),C(11,"date"),e()()()),i&2){let n=a.$implicit;h(n.type.toLowerCase()),r(8),c(n.message),r(2),c(_(11,4,n.createdAt,"short"))}}function L(i,a){if(i&1&&(t(0,"div",22)(1,"h2"),o(2,"Alertes"),e(),t(3,"div",25),v(4,H,12,7,"div",26,R),e()()),i&2){let n=O(2);r(4),S(n.alerts())}}function V(i,a){if(i&1&&(t(0,"tr")(1,"td")(2,"strong"),o(3),e()(),t(4,"td")(5,"span",32),o(6),e()(),t(7,"td"),o(8),e(),t(9,"td"),o(10),C(11,"number"),e(),t(12,"td"),o(13),C(14,"date"),e()()),i&2){let n=a.$implicit,s=O(2);r(3),c(n.reference),r(2),h(s.getTransactionTypeClass(n.type)),r(),f(" ",s.getTransactionTypeLabel(n.type)," "),r(2),c(n.quantity),r(2),f("",_(11,7,n.totalPrice,"1.2-2")," FCFA"),r(3),c(_(14,10,n.createdAt,"short"))}}function F(i,a){if(i&1&&(t(0,"div",4)(1,"div",5)(2,"div",6),g(),t(3,"svg",7),l(4,"path",8)(5,"path",9),e()(),p(),t(6,"div",10)(7,"h3"),o(8),e(),t(9,"p"),o(10,"Produits Total"),e()()(),t(11,"div",11)(12,"div",6),g(),t(13,"svg",7),l(14,"path",12)(15,"line",13)(16,"line",14),e()(),p(),t(17,"div",10)(18,"h3"),o(19),e(),t(20,"p"),o(21,"Stock Faible"),e()()(),t(22,"div",15)(23,"div",6),g(),t(24,"svg",7),l(25,"circle",16)(26,"line",17)(27,"line",18),e()(),p(),t(28,"div",10)(29,"h3"),o(30),e(),t(31,"p"),o(32,"Rupture de Stock"),e()()(),t(33,"div",19)(34,"div",6),g(),t(35,"svg",7),l(36,"line",20)(37,"path",21),e()(),p(),t(38,"div",10)(39,"h3"),o(40),C(41,"number"),e(),t(42,"p"),o(43,"Revenu Total"),e()()()(),b(44,L,6,0,"div",22),t(45,"div",23)(46,"h2"),o(47,"Transactions R\xE9centes"),e(),t(48,"div",24)(49,"table")(50,"thead")(51,"tr")(52,"th"),o(53,"R\xE9f\xE9rence"),e(),t(54,"th"),o(55,"Type"),e(),t(56,"th"),o(57,"Quantit\xE9"),e(),t(58,"th"),o(59,"Montant"),e(),t(60,"th"),o(61,"Date"),e()()(),t(62,"tbody"),v(63,V,15,13,"tr",null,R),e()()()()),i&2){let n=O();r(8),c(n.stats().totalProducts),r(11),c(n.stats().lowStock),r(11),c(n.stats().outOfStock),r(10),f("",_(41,5,n.stats().totalRevenue,"1.2-2")," FCFA"),r(4),u(n.alerts().length>0?44:-1),r(19),S(n.recentTransactions())}}var D=class i{constructor(a,n,s){this.productService=a;this.inventoryService=n;this.saleService=s}stats=m({totalProducts:0,lowStock:0,outOfStock:0,totalRevenue:0,todaySales:0});recentTransactions=m([]);alerts=m([]);loading=m(!0);ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading.set(!0),this.productService.getProducts().subscribe(a=>{let n=a.filter(d=>d.quantity<=d.minQuantity&&d.quantity>0).length,s=a.filter(d=>d.quantity===0).length;this.stats.update(d=>M(x({},d),{totalProducts:a.length,lowStock:n,outOfStock:s}))}),this.saleService.getTotalRevenue().subscribe(a=>{this.stats.update(n=>M(x({},n),{totalRevenue:a}))}),this.saleService.getTodaySales().subscribe(a=>{this.stats.update(n=>M(x({},n),{todaySales:a.length}))}),this.inventoryService.getTransactions().subscribe(a=>{this.recentTransactions.set(a.slice(0,5))}),this.inventoryService.getUnreadAlerts().subscribe(a=>{this.alerts.set(a),this.loading.set(!1)})}getTransactionTypeLabel(a){return{PURCHASE:"Achat",SALE:"Vente",ADJUSTMENT:"Ajustement",RETURN:"Retour",TRANSFER:"Transfert"}[a]||a}getTransactionTypeClass(a){return{PURCHASE:"success",SALE:"primary",ADJUSTMENT:"warning",RETURN:"danger",TRANSFER:"info"}[a]||"default"}static \u0275fac=function(n){return new(n||i)(P(w),P(z),P(I))};static \u0275cmp=y({type:i,selectors:[["app-dashboard"]],decls:8,vars:1,consts:[[1,"dashboard"],[1,"dashboard-header"],[1,"loading"],[1,"spinner"],[1,"stats-grid"],[1,"stat-card","primary"],[1,"stat-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 7H4C2.89543 7 2 7.89543 2 9V19C2 20.1046 2.89543 21 4 21H20C21.1046 21 22 20.1046 22 19V9C22 7.89543 21.1046 7 20 7Z"],["d","M16 21V5C16 4.46957 15.7893 3.96086 15.4142 3.58579C15.0391 3.21071 14.5304 3 14 3H10C9.46957 3 8.96086 3.21071 8.58579 3.58579C8.21071 3.96086 8 4.46957 8 5V21"],[1,"stat-content"],[1,"stat-card","warning"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"stat-card","danger"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"stat-card","success"],["x1","12","y1","1","x2","12","y2","23"],["d","M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"],[1,"alerts-section"],[1,"transactions-section"],[1,"transactions-table"],[1,"alerts-list"],[1,"alert-item",3,"class"],[1,"alert-item"],[1,"alert-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"alert-content"],[1,"alert-time"],[1,"badge"]],template:function(n,s){n&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Tableau de Bord"),e(),t(4,"p"),o(5,"Vue d'ensemble de votre inventaire"),e()(),b(6,A,4,0,"div",2)(7,F,65,8),e()),n&2&&(r(6),u(s.loading()?6:7))},dependencies:[k,T,E],styles:[".dashboard[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:32px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1a202c;margin:0 0 8px}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin:0}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#718096}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 1px 3px #0000001a;transition:all .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0 0 4px;color:#1a202c}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.stat-card.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e6f0ff;color:#667eea}.stat-card.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#fff4e6;color:#f59e0b}.stat-card.danger[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ffe6e6;color:#ef4444}.stat-card.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e6f7f0;color:#10b981}.alerts-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;margin-bottom:32px;box-shadow:0 1px 3px #0000001a}.alerts-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1a202c;margin:0 0 16px}.alerts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.alert-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:16px;border-radius:8px;border-left:4px solid}.alert-item.low_stock[_ngcontent-%COMP%]{background:#fff4e6;border-color:#f59e0b}.alert-item.low_stock[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f59e0b}.alert-item.out_of_stock[_ngcontent-%COMP%]{background:#ffe6e6;border-color:#ef4444}.alert-item.out_of_stock[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ef4444}.alert-item[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]{flex:1}.alert-item[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;color:#1a202c;font-weight:500}.alert-item[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]   .alert-time[_ngcontent-%COMP%]{font-size:12px;color:#718096}.transactions-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000001a}.transactions-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1a202c;margin:0 0 16px}.transactions-table[_ngcontent-%COMP%]{overflow-x:auto}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f7fafc}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;font-size:13px;font-weight:600;color:#4a5568;text-transform:uppercase;letter-spacing:.5px}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;transition:background .2s}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f7fafc}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;color:#2d3748;font-size:14px}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}.badge.primary[_ngcontent-%COMP%]{background:#e6f0ff;color:#667eea}.badge.success[_ngcontent-%COMP%]{background:#e6f7f0;color:#10b981}.badge.warning[_ngcontent-%COMP%]{background:#fff4e6;color:#f59e0b}.badge.danger[_ngcontent-%COMP%]{background:#ffe6e6;color:#ef4444}.badge.info[_ngcontent-%COMP%]{background:#e6f7ff;color:#3b82f6}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.dashboard[_ngcontent-%COMP%]{padding:16px}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{padding:20px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.alerts-section[_ngcontent-%COMP%], .transactions-section[_ngcontent-%COMP%]{padding:16px;margin-bottom:24px}.alerts-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .transactions-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:12px}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:13px}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 12px;font-size:11px}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;font-size:13px}.badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 10px}}@media (max-width: 480px){.dashboard[_ngcontent-%COMP%]{padding:12px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.stat-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:16px}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:12px}.transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .transactions-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){display:none}.alert-item[_ngcontent-%COMP%]{padding:12px;font-size:13px}}"]})};export{D as DashboardComponent};
