import{A as n,M as c,a as i,b as o,k as r,ka as d}from"./chunk-6W2COFZ2.js";var m=class u{salesSignal=d([]);customersSignal=d([]);mockCustomers=[{id:"1",name:"Jean Martin",email:"jean.martin@email.com",phone:"+33 6 12 34 56 78",address:"10 Rue de Paris",city:"Paris",country:"France",totalPurchases:5420.5,createdAt:new Date(2025,8,1),updatedAt:new Date},{id:"2",name:"Sophie Dubois",email:"sophie.dubois@email.com",phone:"+33 6 98 76 54 32",address:"25 Avenue des Champs",city:"Lyon",country:"France",totalPurchases:2150,createdAt:new Date(2025,8,15),updatedAt:new Date}];mockSales=[{id:"1",saleNumber:"VEN-2025-001",customerId:"1",items:[{id:"1",productId:"1",quantity:1,unitPrice:799.99,discount:0,total:799.99},{id:"2",productId:"2",quantity:2,unitPrice:29.99,discount:0,total:59.98}],subtotal:859.97,tax:171.99,discount:0,total:1031.96,paymentMethod:"CARD",paymentStatus:"PAID",userId:"1",createdAt:new Date(2025,9,1),updatedAt:new Date(2025,9,1)},{id:"2",saleNumber:"VEN-2025-002",customerId:"2",items:[{id:"3",productId:"3",quantity:5,unitPrice:19.99,discount:10,total:89.96}],subtotal:99.95,tax:19.99,discount:10,total:109.94,paymentMethod:"CASH",paymentStatus:"PAID",userId:"2",createdAt:new Date(2025,9,2),updatedAt:new Date(2025,9,2)},{id:"3",saleNumber:"VEN-2025-003",items:[{id:"4",productId:"5",quantity:1,unitPrice:249.99,discount:0,total:249.99}],subtotal:249.99,tax:50,discount:0,total:299.99,paymentMethod:"MOBILE_MONEY",paymentStatus:"PENDING",userId:"1",createdAt:new Date(2025,9,5),updatedAt:new Date(2025,9,5)}];constructor(){this.salesSignal.set(this.mockSales),this.customersSignal.set(this.mockCustomers)}get sales(){return this.salesSignal.asReadonly()}get customers(){return this.customersSignal.asReadonly()}getSales(){return r(this.salesSignal()).pipe(n(300))}getSaleById(a){let e=this.salesSignal().find(t=>t.id===a);return r(e).pipe(n(200))}addSale(a){let e=`VEN-${new Date().getFullYear()}-${String(this.salesSignal().length+1).padStart(3,"0")}`,t=o(i({},a),{id:Date.now().toString(),saleNumber:e,createdAt:new Date,updatedAt:new Date});return this.salesSignal.update(s=>[t,...s]),r(t).pipe(n(300))}updateSale(a,e){let t=this.salesSignal().findIndex(s=>s.id===a);if(t!==-1){let s=o(i(i({},this.salesSignal()[t]),e),{updatedAt:new Date});return this.salesSignal.update(p=>{let l=[...p];return l[t]=s,l}),r(s).pipe(n(300))}throw new Error("Sale not found")}getCustomers(){return r(this.customersSignal()).pipe(n(200))}addCustomer(a){let e=o(i({},a),{id:Date.now().toString(),totalPurchases:0,createdAt:new Date,updatedAt:new Date});return this.customersSignal.update(t=>[...t,e]),r(e).pipe(n(300))}getTodaySales(){let a=new Date;a.setHours(0,0,0,0);let e=this.salesSignal().filter(t=>{let s=new Date(t.createdAt);return s.setHours(0,0,0,0),s.getTime()===a.getTime()});return r(e).pipe(n(200))}getTotalRevenue(){let a=this.salesSignal().filter(e=>e.paymentStatus==="PAID").reduce((e,t)=>e+t.total,0);return r(a).pipe(n(200))}static \u0275fac=function(e){return new(e||u)};static \u0275prov=c({token:u,factory:u.\u0275fac,providedIn:"root"})};export{m as a};
